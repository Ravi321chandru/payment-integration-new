{"ast":null,"code":"import{useState,useEffect}from'react';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const RazorpayComponent=()=>{const[customerId,setCustomerId]=useState(null);const[orderId,setOrderId]=useState(null);const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[mobile,setMobile]=useState(\"\");const[amount,setAmount]=useState(\"\");const generateReceiptId=()=>{const prefix=\"order_rcptid_\";const random=Date.now().toString();return\"\".concat(prefix).concat(random);};useEffect(()=>{const initializeRazorpay=async()=>{try{const customerData={name:name,contact:mobile,email:email,fail_existing:0};const customerResponse=await fetch(\"https://api.razorpay.com/v1/customers\",{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Basic '+btoa('rzp_test_SqxHGtRgDOg8av:qnWT7rEGLNnIi9fbjyzq5UK8')},body:JSON.stringify(customerData)});if(!customerResponse.ok){const error=await customerResponse.json();throw new Error(\"Razorpay customer creation failed: \".concat(JSON.stringify(error)));}const customer=await customerResponse.json();setCustomerId(customer.id);const orderResponse=await fetch(\"https://api.razorpay.com/v1/orders\",{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Basic '+btoa('rzp_test_Bv7ynRgcpldwRg:03SPtWNWANi7gLRTIPPjX4T3')},body:JSON.stringify({amount:amount*100,currency:\"INR\",receipt:generateReceiptId()// Use the generated receipt ID here\n})});if(!orderResponse.ok){const error=await orderResponse.json();throw new Error(\"Razorpay order creation failed: \".concat(JSON.stringify(error)));}const order=await orderResponse.json();if(order.id){setOrderId(order.id);sessionStorage.setItem('orderId',order.id);}else{console.error('Razorpay order creation failed:',order);}}catch(error){console.error(error.message);}};initializeRazorpay();},[name,amount,email,mobile]);useEffect(()=>{const fetchCustomerOrderInfo=async()=>{const storedCustomerId=sessionStorage.getItem('customerId');const storedOrderId=sessionStorage.getItem('orderId');if(storedCustomerId&&storedOrderId){setCustomerId(storedCustomerId);setOrderId(storedOrderId);}};fetchCustomerOrderInfo();},[]);const handlePayment=e=>{e.preventDefault();if(amount===\"\"){alert(\"Please enter the amount.\");}else{var options={key:\"rzp_test_SqxHGtRgDOg8av\",amount:amount*100,currency:\"INR\",name:\"Payment Integration\",description:\"For shopping\",handler:function(response){if(response.razorpay_order_id){alert(\"ORDER ID: \"+response.razorpay_order_id);}else{alert(\"Order ID is not available\");}alert(\"PAYMENT ID: \"+response.razorpay_payment_id);},prefill:{name:name,email:email,contact:mobile},notes:{address:\"Razorpay Corporate Office\"},theme:{color:\"#3399cc\"},customer_id:customerId,order_id:orderId,save:1};var pay=new window.Razorpay(options);pay.open();}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Razor Pay Payment Integration\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Mobile Number\",value:mobile,onChange:e=>setMobile(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Amount\",value:amount,onChange:e=>setAmount(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handlePayment,children:\"Submit Payment\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Customer ID: \",customerId]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Order ID: \",orderId]})]})]});};export default RazorpayComponent;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","RazorpayComponent","customerId","setCustomerId","orderId","setOrderId","name","setName","email","setEmail","mobile","setMobile","amount","setAmount","generateReceiptId","prefix","random","Date","now","toString","concat","initializeRazorpay","customerData","contact","fail_existing","customerResponse","fetch","method","headers","btoa","body","JSON","stringify","ok","error","json","Error","customer","id","orderResponse","currency","receipt","order","sessionStorage","setItem","console","message","fetchCustomerOrderInfo","storedCustomerId","getItem","storedOrderId","handlePayment","e","preventDefault","alert","options","key","description","handler","response","razorpay_order_id","razorpay_payment_id","prefill","notes","address","theme","color","customer_id","order_id","save","pay","window","Razorpay","open","children","type","placeholder","value","onChange","target","onClick"],"sources":["C:/RAVICHANDRU/Projects/React JS/payment-integration/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport './style.css';\n\nconst RazorpayComponent = () => {\n  const [customerId, setCustomerId] = useState(null);\n  const [orderId, setOrderId] = useState(null);\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [mobile, setMobile] = useState(\"\");\n  const [amount, setAmount] = useState(\"\");\n\n  const generateReceiptId = () => {\n    const prefix = \"order_rcptid_\";\n    const random = Date.now().toString();\n    return `${prefix}${random}`;\n  };\n\n  useEffect(() => {\n    const initializeRazorpay = async () => {\n      try {\n        const customerData = {\n          name: name,\n          contact: mobile,\n          email: email,\n          fail_existing: 0,\n        };\n\n        const customerResponse = await fetch(\"https://api.razorpay.com/v1/customers\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Basic ' + btoa('rzp_test_SqxHGtRgDOg8av:qnWT7rEGLNnIi9fbjyzq5UK8'),\n          },\n          body: JSON.stringify(customerData),\n        });\n\n        if (!customerResponse.ok) {\n          const error = await customerResponse.json();\n          throw new Error(`Razorpay customer creation failed: ${JSON.stringify(error)}`);\n        }\n\n        const customer = await customerResponse.json();\n        setCustomerId(customer.id);\n\n        const orderResponse = await fetch(\"https://api.razorpay.com/v1/orders\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Basic ' + btoa('rzp_test_Bv7ynRgcpldwRg:03SPtWNWANi7gLRTIPPjX4T3'),\n          },\n          body: JSON.stringify({\n            amount: amount * 100,\n            currency: \"INR\",\n            receipt: generateReceiptId(), // Use the generated receipt ID here\n          }),\n        });\n\n        if (!orderResponse.ok) {\n          const error = await orderResponse.json();\n          throw new Error(`Razorpay order creation failed: ${JSON.stringify(error)}`);\n        }\n\n        const order = await orderResponse.json();\n\n        if (order.id) {\n          setOrderId(order.id);\n          sessionStorage.setItem('orderId', order.id);\n        } else {\n          console.error('Razorpay order creation failed:', order);\n        }\n      } catch (error) {\n        console.error(error.message);\n      }\n    };\n\n    initializeRazorpay();\n  }, [name, amount, email, mobile]);\n\n  useEffect(() => {\n    const fetchCustomerOrderInfo = async () => {\n      const storedCustomerId = sessionStorage.getItem('customerId');\n      const storedOrderId = sessionStorage.getItem('orderId');\n\n      if (storedCustomerId && storedOrderId) {\n        setCustomerId(storedCustomerId);\n        setOrderId(storedOrderId);\n      }\n    };\n\n    fetchCustomerOrderInfo();\n  }, []);\n\n  const handlePayment = (e) => {\n    e.preventDefault();\n    if (amount === \"\") {\n      alert(\"Please enter the amount.\");\n    } else {\n      var options = {\n        key: \"rzp_test_SqxHGtRgDOg8av\",\n        amount: amount * 100,\n        currency: \"INR\",\n        name: \"Payment Integration\",\n        description: \"For shopping\",\n        handler: function (response) {\n          if (response.razorpay_order_id) {\n            alert(\"ORDER ID: \" + response.razorpay_order_id);\n          } else {\n            alert(\"Order ID is not available\");\n          }\n\n          alert(\"PAYMENT ID: \" + response.razorpay_payment_id);\n        },\n        prefill: {\n          name: name,\n          email: email,\n          contact: mobile,\n        },\n        notes: {\n          address: \"Razorpay Corporate Office\",\n        },\n        theme: {\n          color: \"#3399cc\",\n        },\n        customer_id: customerId,\n        order_id: orderId,\n        save: 1,\n      };\n\n      var pay = new window.Razorpay(options);\n      pay.open();\n    }\n  };\n\n  return (\n    <div>\n      <div>\n        <h2>Razor Pay Payment Integration</h2>\n        <form>\n          <input\n            type=\"text\"\n            placeholder=\"Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <br />\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <br />\n          <input\n            type=\"tel\"\n            placeholder=\"Mobile Number\"\n            value={mobile}\n            onChange={(e) => setMobile(e.target.value)}\n          />\n          <br />\n          <input\n            type=\"number\"\n            placeholder=\"Amount\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n          />\n          <br />\n          <button\n            type=\"submit\"\n            onClick={handlePayment}\n          >\n            Submit Payment\n          </button>\n        </form>\n      </div>\n      <div>\n        <p>Customer ID: {customerId}</p>\n        <p>Order ID: {orderId}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default RazorpayComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}